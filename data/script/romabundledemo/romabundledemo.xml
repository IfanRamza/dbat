<?xml version="1.0" encoding="UTF-8"?>
<document dbat_script_version="1.0">
  <input base_dir="$HERE">

    <c>No control points</c>
         
    <images image_base_dir="$DBAT">
      <file format="id,path">images/images.txt</file>
    </images>

    <prior_eo>
      <file format="id,x,y,z,omega,phi,kappa" units="degrees">prior/initial_eo.txt</file>
    </prior_eo>

    <image_pts>
      <file format="im,id,x,y" sxy="1">measurements/markpts.txt</file>
    </image_pts>

    <cameras>
      <file>cameras/EOS5DMarkII.xml</file>
    </cameras>
  </input>

  <operations>
    <operation min_rays="2">check_ray_count</operation>
    <operation>
      <set_initial_values>
        <io>
          <all>loaded</all>
          <aspect>1</aspect>
          <skew>0</skew>
        </io>
        <eo>
          <all>loaded</all>
        </eo>
      </set_initial_values>
    </operation>
    <operation>
      <set_bundle_estimate_params>
        <io>
          <all>true</all>
          <aspect>false</aspect>
          <skew>false</skew>
          <P>false</P>
          <K3>false</K3>
        </io>
        <eo>
          <all>true</all>
        </eo>
        <op>
          <all>true</all>
        </op>
      </set_bundle_estimate_params>
    </operation>
    <operation>forward_intersection</operation>
    <operation>
      <set_datum ref_cam="1" ref_base="longest">depend</set_datum>
    </operation>
    <operation>bundle_adjustment</operation>
  </operations>
  
  <output>
    <plots>
      <plot id="1">image</plot>
      <plot cam_size="0.1">iteration_trace</plot>
    </plots>
    <files base_dir="$HERE">
      <report>
        <file>result/report.txt</file>
      </report>
      <io>
        <file>result/EOS5DMarkII.xml</file>
      </io>
    </files>
  </output>
</document>
